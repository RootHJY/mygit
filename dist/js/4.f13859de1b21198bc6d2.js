webpackJsonp([4],{"+7T2":function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("div",{ref:"aliPay",staticStyle:{"z-index":"999999!important"},domProps:{innerHTML:t._s(t.aliPayHtml)}}),t._v(" "),o("div",{staticClass:"popBg",on:{click:t.closePop}}),t._v(" "),o("div",{staticClass:"popSendMethod"},[o("div",{staticClass:"tip"},[o("p",[t._v("支付方式")]),t._v(" "),o("span",{staticClass:"icon-close",on:{click:t.closePop}})]),t._v(" "),o("ul",t._l(t.payMethod,function(e){return o("li",{staticClass:"item justify",class:{hide:t.isWechat&&"alipay"==e.name},on:{click:function(o){t.payFun(e.id,e.name)}}},[o("div",{staticClass:"box left"},[o("img",{attrs:{src:e.icon,alt:""}}),t._v(" "),o("b",[t._v(t._s(e.description))])]),t._v(" "),t._m(0,!0)])}))])])},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box right"},[o("span",{staticClass:"icon-arrow"})])}],i={render:r,staticRenderFns:a};e.a=i},"0m0p":function(t,e,o){"use strict";var r=o("wiLv"),a=o("+7T2"),i=o("mPyB"),s=i(r.a,a.a,!1,null,null,null);e.a=s.exports},"62Nr":function(t,e,o){var r=o("5I2C");r(r.S+r.F*!o("eOPJ"),"Object",{defineProperty:o("8tNu").f})},"8oZ7":function(t,e,o){t.exports=o.p+"dist/img/fff.e15f37f.png"},"95sO":function(t,e,o){"use strict";var r=o("l4nz"),a=o("ggdd"),i=o("mPyB"),s=i(r.a,a.a,!1,null,null,null);e.a=s.exports},BEi2:function(t,e,o){var r=o("qAJy"),a=o("OOMP");t.exports=o("ZBPP").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},ELNT:function(t,e,o){"use strict";var r=o("dbJu"),a=o.n(r),i=o("HFN4"),s=o.n(i),n=function(){function t(){a()(this,t)}return s()(t,[{key:"createPop",value:function(t,e,o){document.querySelectorAll(".popMin").length&&this.delete();var r=document.createElement("div");return r.className="popMin animated "+o,r.innerHTML='<span class="icon_imp '+t+'" ></span><p class="txt">'+e+"</p>",r}},{key:"show",value:function(t,e){var o=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=this.createPop(t,e,r);a.classList.add("fadeIn"),document.body.appendChild(a),setTimeout(function(){o.close()},2e3)}},{key:"close",value:function(){for(var t=this,e=document.querySelectorAll(".popMin"),o=0;o<e.length;o++){var r=e[o];r.classList.remove("fadeIn"),r.classList.add("fadeOut")}setTimeout(function(){t.delete()},1e3)}},{key:"delete",value:function(){for(var t=document.querySelectorAll(".popMin"),e=0;e<t.length;e++){var o=t[e];o.parentNode.removeChild(o)}}}]),t}();e.a=new n},HFN4:function(t,e,o){"use strict";e.__esModule=!0;var r=o("HmUy"),a=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}()},HmUy:function(t,e,o){t.exports={default:o("kYqm"),__esModule:!0}},Ii6M:function(t,e,o){"use strict";var r=o("u6qr"),a=o.n(r),i=o("Pexp"),s=o("E7z3"),n=o("ELNT"),c=o("95sO"),d=o("TAwi"),l=o("0m0p");e.a={data:function(){return{pageTitle:"填写订单",itemList:"",itemTotalPrice:"",alertMsg:"",needPayPrice:"",availableCouponCount:"",notice:"",receiver:"",shippingPrice:"",promotionPrice:"",orderItems:"",orderAddId:"",promotionId:"",promotionType:"",ptId:"",orderId:[],showPayPop:!1,showAllDiv:!1}},components:{orderAdd:c.a,orderMemo:d.a,VTitle:i.a,payOrder:l.a,common:s.a},created:function(){this.initData()},methods:{initData:function(){this.orderItems=this.$store.state.orderItems||localStorage.getItem("orderItems")||"",this.promotionId=this.$store.state.promotionId||localStorage.getItem("promotionId")||"",this.promotionType=this.$store.state.promotionType||localStorage.getItem("promotionType")||"",this.ptId=this.$store.state.ptId||localStorage.getItem("ptId")||"",this.orderId=localStorage.getItem("orderId")||[],this.orderId.length>0&&(this.$store.state.orderTabActive="00",this.$router.push("/center/orderList")),console.log("orderItems="+this.orderItems),console.log("promotionId="+this.promotionId),console.log("promotionType="+this.promotionType),console.log("ptId="+this.ptId),console.log("orderId="+this.orderId),this.getOrderList()},getOrderList:function(){var t=this,e="/wechatecom/appserver/order/bill.do?items="+this.orderItems+"&promotionId="+t.promotionId+"&promotionType="+t.promotionType+"&ptId="+t.ptId+"&receiverId="+t.orderAddId+"&couponRecordId="+t.$store.state.orderCouponId;this.ajaxDataFun("post",e,function(e){if("200"==e.code){t.showAllDiv=!0;var o=e.data;t.itemList=o.itemList,t.availableCouponCount=o.availableCouponCount,t.itemTotalPrice=o.itemTotalPrice,t.needPayPrice=o.needPayPrice,t.alertMsg=o.alertMsg,t.notice=o.notice,t.receiver=o.receiver,t.orderAddId=o.receiver.id,t.$store.state.orderAddId||(t.$store.state.orderAddId=o.receiver.id,t.$store.state.orderAddName=o.receiver.consignee,t.$store.state.orderAddTel=o.receiver.phone,t.$store.state.orderAddDes=o.receiver.areaName+o.receiver.address),t.shippingPrice=o.shippingPrice,t.promotionPrice=o.promotionPrice}})},cerateOrder:function(){var t=this;if(!t.orderAddId)return void n.a.show("icon-sign","请填写收货地址");if(this.alertMsg)return void n.a.show("icon-sign",this.alertMsg);if(t.orderId.length>0)t.showPayPop=!0,console.log("订单ID已存在==="+t.orderId);else{var e="/wechatecom/appserver/order/create.do?items="+t.orderItems+"&promotionId="+t.promotionId+"&promotionType="+t.promotionType+"&ptId="+t.ptId+"&receiverId="+t.$store.state.orderAddId+"&couponRecordId="+t.$store.state.orderCouponId+"&memo="+t.$store.state.orderMemo;this.ajaxDataFun("post",e,function(e){if("200"==e.code){var o=!0,r=!1,i=void 0;try{for(var s,n=a()(e.data);!(o=(s=n.next()).done);o=!0){var c=s.value;t.orderId.push(c.id)}}catch(t){r=!0,i=t}finally{try{!o&&n.return&&n.return()}finally{if(r)throw i}}localStorage.setItem("orderId",t.orderId),t.showPayPop=!0,t.getMcartNum(),console.log("创建订单成功,订单ID===="+t.orderId)}})}},getMcartNum:function(){var t=this;this.ajaxDataFun("post","/wechatecom/appserver/cart/getCartSkuCount.do",function(e){"200"==e.code&&(t.$store.state.cartNum=e.data.count,localStorage.setItem("cartNum",e.data.count))})},chooseCouponF:function(){this.$router.push("/chooseCoupon")}}}},OOMP:function(t,e,o){var r=o("ca2Z"),a=o("ZpzW")("iterator"),i=o("JR4r");t.exports=o("ZBPP").getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||i[r(t)]}},Pexp:function(t,e,o){"use strict";var r=o("t/3t"),a=o("pDxG"),i=o("mPyB"),s=i(r.a,a.a,!1,null,null,null);e.a=s.exports},Pr4z:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"normal textarea"},[o("div",{staticClass:"clearfix"},[o("div",{staticClass:"fleft"},[t._v("买家留言")]),t._v(" "),o("div",{staticClass:"fright"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$store.state.orderMemo,expression:"$store.state.orderMemo"}],attrs:{placeholder:"不超过100字",maxlength:"100"},domProps:{value:t.$store.state.orderMemo},on:{input:function(e){e.target.composing||t.$set(t.$store.state,"orderMemo",e.target.value)}}})])])])},a=[],i={render:r,staticRenderFns:a};e.a=i},TAwi:function(t,e,o){"use strict";var r=o("dcN6"),a=o("Pr4z"),i=o("mPyB"),s=i(r.a,a.a,!1,null,null,null);e.a=s.exports},TBFq:function(t,e,o){o("EcyA"),o("EyoV"),t.exports=o("BEi2")},YpdP:function(t,e,o){t.exports=o.p+"dist/img/logo2.eadc73f.png"},ca2Z:function(t,e,o){var r=o("4zJo"),a=o("ZpzW")("toStringTag"),i="Arguments"==r(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,o,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(o=s(e=Object(t),a))?o:i?r(e):"Object"==(n=r(e))&&"function"==typeof e.callee?"Arguments":n}},dbJu:function(t,e,o){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},dcN6:function(t,e,o){"use strict";e.a={data:function(){return{pageTitle:"买家留言"}},components:{},created:function(){},methods:{}}},g9F6:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("Ii6M"),a=o("jpq5"),i=o("mPyB"),s=i(r.a,a.a,!1,null,null,null);e.default=s.exports},ggdd:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("router-link",{staticClass:"addList",attrs:{to:"/center/myaddress?fromOrder=1"}},[o("div",{staticClass:"justify top"},[o("div",{staticClass:"box name"},[o("p",[t._v(t._s(t.$store.state.orderAddName))])]),t._v(" "),o("div",{staticClass:"box tel"},[t._v(t._s(t.$store.state.orderAddTel))])]),t._v(" "),o("div",{staticClass:"info justify",staticStyle:{"font-size":"0"}},[o("p",{staticClass:"box"},[t._v(t._s(t.$store.state.orderAddDes))]),t._v(" "),o("span",{staticClass:"icon-arrow box absoluteIcon"})])])},a=[],i={render:r,staticRenderFns:a};e.a=i},jpq5:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bgf paddingBt50 noScroll",attrs:{id:"container"}},[r("v-title",[t._v(" "+t._s(t.pageTitle))]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.showAllDiv,expression:"!showAllDiv"}],attrs:{id:"loading"}},[r("img",{attrs:{src:o("YpdP"),alt:"loading"}})]),t._v(" "),r("div",{staticClass:"myWhiteBg"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.notice,expression:"notice"}],staticClass:"notice",staticStyle:{"text-align":"left"}},[r("span",{staticClass:"icon-notice"}),t._v(" "),r("p",[r("marquee",{attrs:{behavior:"1",direction:"left",loop:"-1"}},[t._v("\n                    "+t._s(t.notice.noticeName)+"\n                ")])],1)]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.receiver,expression:"!receiver"}],staticClass:"addAdd"},[r("router-link",{attrs:{to:"/center/editAdd?fromOrder=1"}},[r("span",{staticClass:"icon-cart_increase"}),t._v("添加地址 ")])],1),t._v(" "),r("orderAdd",{directives:[{name:"show",rawName:"v-show",value:t.receiver,expression:"receiver"}]}),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"normal"},[r("div",{staticClass:"clearfix",on:{click:t.chooseCouponF}},[r("div",{staticClass:"fleft"},[t._v("优惠券")]),t._v(" "),r("div",{staticClass:"fright"},[r("p",{directives:[{name:"show",rawName:"v-show",value:!t.$store.state.orderCouponMoney&&t.availableCouponCount,expression:"!$store.state.orderCouponMoney && availableCouponCount"}],staticClass:"active"},[t._v(" "+t._s(t.availableCouponCount)+"张可用 ")]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:!t.availableCouponCount&&!t.$store.state.orderCouponMoney,expression:"!availableCouponCount && !$store.state.orderCouponMoney"}]},[t._v("无可用优惠券")]),t._v(" "),r("p",{directives:[{name:"show",rawName:"v-show",value:t.availableCouponCount&&t.$store.state.orderCouponMoney,expression:"availableCouponCount && $store.state.orderCouponMoney"}],staticClass:"active"},[t._v("- ¥"+t._s(t.$store.state.orderCouponMoney))]),t._v(" "),r("span",{staticClass:"icon-arrow"})])])]),t._v(" "),r("orderMemo"),t._v(" "),r("div",{staticClass:"normal"},[r("ul",{staticClass:"leftRight"},[r("li",{staticClass:"clearfix"},[r("span",{staticClass:"fleft"},[t._v("商品合计")]),t._v(" "),r("span",{staticClass:"fright"},[t._v("¥"+t._s(t.itemTotalPrice))])]),t._v(" "),r("li",{staticClass:"clearfix"},[r("span",{staticClass:"fleft"},[t._v("运费")]),t._v(" "),r("span",{staticClass:"fright"},[t._v("¥"+t._s(t.shippingPrice))])]),t._v(" "),t.promotionPrice?r("li",{staticClass:"clearfix"},[r("span",{staticClass:"fleft"},[t._v("优惠")]),t._v(" "),r("span",{staticClass:"fright"},[t._v("-¥"+t._s(t.promotionPrice))])]):t._e()])]),t._v(" "),r("div",{staticClass:"normal paddingBt50",staticStyle:{"padding-top":"0"}},t._l(t.itemList,function(e){return r("div",{staticClass:"orderListInfo justify"},[r("div",{staticClass:"img box"},[r("router-link",{attrs:{to:{path:"shopDetails",query:{id:e.product.id}}}},[r("img",{attrs:{src:e.product.image,alt:""}}),t._v(" "),e.product.image?t._e():r("img",{attrs:{src:o("8oZ7")}})])],1),t._v(" "),r("router-link",{staticClass:"des box",attrs:{to:{path:"shopDetails",query:{id:e.product.id}}}},[r("b",[e.product.productMark?r("i",[t._v(t._s(e.product.productMark))]):t._e(),t._v(" \n                        "+t._s(e.product.name)+"\n                    ")]),t._v(" "),r("p",[t._v("规格："+t._s(e.specDesc))]),t._v(" "),r("div",{staticClass:"price clearfix"},[r("p",[t._v(" ¥"+t._s(e.price)+" \n                            "),r("i",{directives:[{name:"show",rawName:"v-show",value:e.stockOver,expression:"item.stockOver"}]},[t._v("库存不足")])]),t._v(" "),r("span",[t._v("x"+t._s(e.quantity))])])])],1)}))],1),t._v(" "),r("div",{staticClass:"totalPrice justify"},[r("div",{staticClass:"box left"},[t._v("\n            实付款"),r("span",[r("i",{staticClass:"minIcon active"},[t._v("¥")]),t._v(t._s(t.needPayPrice))])]),t._v(" "),r("div",{staticClass:"box right"},[r("div",{staticClass:"sureBtn",class:{active:t.$store.state.orderAddId&&!t.alertMsg},on:{click:t.cerateOrder}},[t._v("\n                去付款("+t._s(t.itemList.length)+") \n            ")])])]),t._v(" "),r("payOrder",{directives:[{name:"show",rawName:"v-show",value:t.showPayPop,expression:"showPayPop"}],attrs:{orderId:t.orderId},on:{closePop:function(e){t.showPayPop=!1}}})],1)},a=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"normal"},[o("div",{staticClass:"clearfix"},[o("div",{staticClass:"fleft"},[t._v(" 配送方式 ")]),t._v(" "),o("div",{staticClass:"fright"},[o("p",[t._v("普通快递")])])])])}],i={render:r,staticRenderFns:a};e.a=i},kYqm:function(t,e,o){o("62Nr");var r=o("ZBPP").Object;t.exports=function(t,e,o){return r.defineProperty(t,e,o)}},l4nz:function(t,e,o){"use strict";e.a={data:function(){return{pageTitle:"订单地址"}},components:{},created:function(){},methods:{}}},pDxG:function(t,e,o){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c;return t._e()},a=[],i={render:r,staticRenderFns:a};e.a=i},"t/3t":function(t,e,o){"use strict";e.a={created:function(){this.updateTitle()},beforeUpdate:function(){this.updateTitle()},methods:{updateTitle:function(){var t=this.$slots.default;if(!(void 0===t||t.length<1||"string"!=typeof t[0].text)){var e=t[0].text;e!==document.title&&(document.title=e)}}}}},u6qr:function(t,e,o){t.exports={default:o("TBFq"),__esModule:!0}},wiLv:function(t,e,o){"use strict";var r=o("C/he");o.n(r),o("E7z3");e.a={data:function(){return{payMethod:"",appId:"",timeStamp:"",nonceStr:"",signType:"",paySign:"",isWechat:!1,aliPayHtml:"",tradeNo:""}},props:["orderId"],created:function(){this.isWeChatF(),this.getPayMethods()},methods:{closePop:function(){this.$emit("closePop")},getPayMethods:function(){var t=this;this.ajaxDataFun("post","/wechatecom/appserver/order/paymentMethods.do",function(e){"200"==e.code&&(t.payMethod=e.data)})},isWeChatF:function(){var t=this;"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)?t.isWechat=!0:t.isWechat=!1},payFun:function(t,e){var o=this,r=o.$refs.aliPay,a=window.location.href;if("alipay"==e){var i="/wechatecom/appserver/payment/aliPaySign.do?payMethodId="+t+"&orderIds="+o.orderId.toString();this.ajaxDataFun("post",i,function(t){o.aliPayHtml=t,o.$nextTick(function(){r.querySelector("form")&&r.querySelector("form").submit()})},1)}else if("wxpay"==e)if(o.isWechat){var s=o.$store.state.wxOpenId||localStorage.getItem("wxOpenId"),n="/wechatecom/appserver/payment/wxOpenIdPaySign.do?openId="+s+"&payMethodId="+t+"&orderIds="+this.orderId.toString();this.ajaxDataFun("post",n,function(t){if("200"==t.code){var e=t.data;o.appId=e.appId,o.timeStamp=e.timeStamp,o.nonceStr=e.nonceStr,o.package=e.package,o.signType=e.signType,o.paySign=e.paySign,o.tradeNo=e.tradeNo,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("wx.WeixinJSBridgeReady",o.onBridgeReady(e),!1):document.attachEvent&&(document.attachEvent("wx.WeixinJSBridgeReady",o.onBridgeReady(e)),document.attachEvent("onwx.WeixinJSBridgeReady",o.onBridgeReady(e))):o.onBridgeReady(e)}})}else{var c="/wechatecom/appserver/payment/wxPaySign.do?payMethodId="+t+"&orderIds="+this.orderId.toString();this.ajaxDataFun("post",c,function(t){if("200"==t.code){var e=t.data,o="",r="";r=a.indexOf("/shop/")>-1?window.location.protocol+"//"+window.location.host+"/wechatecom/h5/shop/shop.html#/paySuccess?isWechat=1&tradeNo="+e.tradeNo:window.location.protocol+"//"+window.location.host+"/shop.html#/paySuccess?isWechat=1&tradeNo="+e.tradeNo,o=e.mwebUrl+"&redirect_url="+encodeURIComponent(r),window.location.href=o}})}},onBridgeReady:function(t){console.log("微信自带==ddd");var e=this;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(t){console.log(t),"get_brand_wcpay_request:ok"==t.err_msg?e.$router.push("/paySuccess?tradeNo="+e.tradeNo):(e.$store.state.orderTabActive="00",e.$router.push("/center/orderList"))})}}}}});
//# sourceMappingURL=4.f13859de1b21198bc6d2.js.map